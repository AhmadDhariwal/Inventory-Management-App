<div class="suppliers-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Suppliers</h1>
      <p class="page-subtitle">Manage your supplier relationships and contact information</p>
    </div>
    <button class="btn btn-primary" (click)="addSupplier()">
      <i class="fas fa-plus"></i>
      Add Supplier
    </button>
  </div>

  <!-- Search and Filters -->
  <div class="search-section">
    <div class="search-input-wrapper">
      <i class="fas fa-search search-icon"></i>
      <input
        type="text"
        class="search-input"
        placeholder="Search suppliers by name, email, or contact person..."
        [(ngModel)]="searchTerm"
        (input)="filterSuppliers()"
      />
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>Loading suppliers...</p>
  </div>

  <!-- Suppliers Table -->
  <div *ngIf="!loading" class="table-container">
    <div class="table-wrapper">
      <table class="suppliers-table">
        <thead>
          <tr>
            <th>Supplier Name</th>
            <th>Contact Person</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Payment Terms</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let supplier of filteredSuppliers; trackBy: trackBySupplier" class="supplier-row">
            <td>
              <div class="supplier-name">
                <strong>{{ supplier.name }}</strong>
              </div>
            </td>
            <td>
              <span class="contact-person">{{ supplier.contactperson || '-' }}</span>
            </td>
            <td>
              <a *ngIf="supplier.email" [href]="'mailto:' + supplier.email" class="email-link">
                {{ supplier.email }}
              </a>
              <span *ngIf="!supplier.email">-</span>
            </td>
            <td>
              <a *ngIf="supplier.phone" [href]="'tel:' + supplier.phone" class="phone-link">
                {{ supplier.phone }}
              </a>
              <span *ngIf="!supplier.phone">-</span>
            </td>
            <td>
              <span class="payment-terms">{{ getPaymentTermsLabel(supplier.paymentterms) }}</span>
            </td>
            <td>
              <span class="status-badge" [class.active]="supplier.isActive" [class.inactive]="!supplier.isActive">
                {{ supplier.isActive ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button
                  class="btn btn-sm btn-info"
                  (click)="viewSupplier(supplier)"
                  title="View supplier details">
                  <i class="fas fa-eye"></i>
                  <span class="btn-text">View</span>
                </button>
                <button
                  class="btn btn-sm btn-outline"
                  (click)="editSupplier(supplier)"
                  title="Edit supplier information">
                  <i class="fas fa-edit"></i>
                  <span class="btn-text">Edit</span>
                </button>
                <button
                  class="btn btn-sm"
                  [class.btn-warning]="supplier.isActive"
                  [class.btn-success]="!supplier.isActive"
                  (click)="toggleSupplierStatus(supplier)"
                  [title]="supplier.isActive ? 'Deactivate this supplier' : 'Activate this supplier'">
                  <i class="fas" [class.fa-pause]="supplier.isActive" [class.fa-play]="!supplier.isActive"></i>
                  <span class="btn-text">{{ supplier.isActive ? 'Deactivate' : 'Activate' }}</span>
                </button>
                <button
                  class="btn btn-sm btn-danger"
                  (click)="confirmDelete(supplier)"
                  title="Permanently delete this supplier">
                  <i class="fas fa-trash"></i>
                  <span class="btn-text">Delete</span>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Empty State -->
      <div *ngIf="filteredSuppliers.length === 0" class="empty-state">
        <i class="fas fa-users"></i>
        <h3>No suppliers found</h3>
        <p *ngIf="searchTerm">Try adjusting your search criteria</p>
        <p *ngIf="!searchTerm">Get started by adding your first supplier</p>
        <button *ngIf="!searchTerm" class="btn btn-primary" (click)="addSupplier()">
          <i class="fas fa-plus"></i>
          Add First Supplier
        </button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="showDeleteModal" class="modal-overlay" (click)="cancelDelete()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Confirm Delete</h3>
        <button title="Cancel delete" class="modal-close" (click)="cancelDelete()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="warning-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <p>Are you sure you want to delete <strong>{{ supplierToDelete?.name }}</strong>?</p>
        <p class="warning-text">This action cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" (click)="cancelDelete()">Cancel</button>
        <button class="btn btn-danger" (click)="deleteSupplier()">Delete</button>
      </div>
    </div>
  </div>
</div>
