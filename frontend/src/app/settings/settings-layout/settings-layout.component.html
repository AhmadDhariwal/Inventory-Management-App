<div class="settings-container">
  <aside class="settings-sidebar">
    <div class="sidebar-header">
      <h2 class="sidebar-title">Settings</h2>
      <p class="sidebar-subtitle">Manage your preferences</p>
      <div class="user-role-badge">
        <span class="role-label">Role:</span>
        <span class="role-value" [ngClass]="'role-' + getUserRole()">{{ getUserRole() | titlecase }}</span>
      </div>
    </div>
    
    <nav class="settings-nav">
      <div class="nav-section">
        <h3 class="nav-section-title">General</h3>
        <a routerLink="account" routerLinkActive="active" class="nav-item">
          <span>Account Settings</span>
        </a>
        <a [routerLink]="hasAnyRole(['admin', 'manager']) ? 'business' : null"
           (click)="getUserRole() === 'user' ? onRestrictedAccess('Business Settings') : null"
           routerLinkActive="active" class="nav-item">
          <span>Business Settings</span>
        </a>
      </div>
      
      <div class="nav-section">
        <h3 class="nav-section-title">Operations</h3>
        <a [routerLink]="hasAnyRole(['admin', 'manager']) ? 'inventory' : null"
           (click)="getUserRole() === 'user' ? onRestrictedAccess('Inventory Settings') : null"
           routerLinkActive="active" class="nav-item">
          <span>Inventory Settings</span>
        </a>
      </div>
      
      <div class="nav-section">
        <h3 class="nav-section-title">Security & Privacy</h3>
        <a [routerLink]="hasRole('admin') ? 'security' : null"
           (click)="getUserRole() === 'user' ? onRestrictedAccess('Security Settings') : null"
           routerLinkActive="active" class="nav-item">
          <span>Security Settings</span>
        </a>
        <a routerLink="notifications" routerLinkActive="active" class="nav-item">
          <span>Notifications</span>
        </a>
      </div>
      
      <div class="nav-section" *ngIf="hasRole('admin') || getUserRole() === 'user'">
        <h3 class="nav-section-title">Administration</h3>
        <a [routerLink]="hasRole('admin') ? 'roles' : null"
           (click)="getUserRole() === 'user' ? onRestrictedAccess('User Roles') : null"
           routerLinkActive="active" class="nav-item" *ngIf="hasRole('admin') || getUserRole() === 'user'">
          <span>User Roles</span>
        </a>
        <a [routerLink]="hasRole('admin') ? 'users' : null"
           (click)="getUserRole() === 'user' ? onRestrictedAccess('Users') : null"
           routerLinkActive="active" class="nav-item" *ngIf="hasRole('admin') || getUserRole() === 'user'">
          <span>Users</span>
        </a>
      </div>
    </nav>
  </aside>

  <main class="settings-content">
    <router-outlet></router-outlet>
  </main>
</div>

<!-- Custom Restriction Modal -->
<app-confirm-modal
  [isVisible]="showRestrictionModal"
  title="Access Restricted"
  [message]="'You are not eligible for ' + restrictionFeature + ' or cannot access it. You only have access to Account Settings.'"
  confirmText="Stay on Account Settings"
  cancelText="Close"
  type="info"
  (confirm)="closeRestrictionModal()"
  (cancel)="closeRestrictionModal()"
></app-confirm-modal>
