<div class="notification-activity-container">
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Notification Activity</h1>
      <p class="page-description">Manage and view your system notifications</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-outline" (click)="markAllAsRead()" [disabled]="notifications.length === 0">
        <i class="fas fa-check-double"></i> Mark all as read
      </button>
      <button class="btn btn-danger-outline" (click)="clearAll()" [disabled]="notifications.length === 0">
        <i class="fas fa-trash-alt"></i> Clear All
      </button>
    </div>
  </div>

  <div class="notifications-list-card">
    <div *ngIf="isLoading" class="loading-state">
      <div class="spinner"></div>
      <p>Loading notifications...</p>
    </div>

    <div *ngIf="!isLoading && notifications.length === 0" class="empty-state">
      <div class="empty-icon">
        <i class="fas fa-bell-slash"></i>
      </div>
      <h3>No notifications yet</h3>
      <p>When you have alerts or updates, they will appear here.</p>
    </div>

    <div *ngIf="!isLoading && notifications.length > 0" class="notifications-list">
      <div 
        *ngFor="let notification of notifications" 
        class="notification-item" 
        [class.unread]="!notification.read"
        (click)="!notification.read && markAsRead(notification._id)"
      >
        <div class="notification-icon" [ngClass]="getTypeClass(notification.type)">
          <i class="fas" [ngClass]="getTypeIcon(notification.type)"></i>
        </div>
        <div class="notification-content">
          <div class="notification-header">
            <h4 class="notification-title">{{ notification.title }}</h4>
            <span class="notification-time">{{ notification.createdAt | date:'medium' }}</span>
          </div>
          <p class="notification-message">{{ notification.message }}</p>
        </div>
        <div class="notification-actions">
          <button class="btn-icon delete-btn" (click)="$event.stopPropagation(); confirmDelete(notification._id)" title="Delete">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="pagination.totalPages > 1" class="pagination-footer">
      <div class="pagination-info">
        Showing {{ (currentPage - 1) * pagination.limit + 1 }} - 
        {{ Math.min(currentPage * pagination.limit, pagination.total) }} 
        of {{ pagination.total }} notifications
      </div>
      <div class="pagination-controls">
        <button [disabled]="currentPage === 1" (click)="onPageChange(currentPage - 1)" class="btn-page">
          <i class="fas fa-chevron-left"></i>
        </button>
        <span class="page-number">Page {{ currentPage }} of {{ pagination.totalPages }}</span>
        <button [disabled]="currentPage === pagination.totalPages" (click)="onPageChange(currentPage + 1)" class="btn-page">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Confirm Delete Modal -->
<app-confirm-modal
  [isVisible]="showConfirmDelete"
  title="Delete Notification"
  message="Are you sure you want to delete this notification? This action cannot be undone."
  confirmText="Delete"
  (confirm)="onDeleteConfirmed()"
  (cancel)="showConfirmDelete = false"
></app-confirm-modal>
